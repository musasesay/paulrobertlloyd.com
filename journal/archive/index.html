---
layout: base
---
<section class="index">
    <header class="index__header">
        <h1 class="index__title">{{ page.title | ampersand | replace: "'","&#8217;" }}</h1>
    </header>

    <div class="index__main">
    {% for post in site.posts  %}
        {% capture this_year %}{{ post.date | date: "%Y" }}{% endcapture %}
        {% capture this_month %}{{ post.date | date: "%m" }}{% endcapture %}
        {% capture this_month_name %}{{ post.date | date: "%B" }}{% endcapture %}
        {% capture next_year %}{{ post.previous.date | date: "%Y" }}{% endcapture %}
        {% capture next_month %}{{ post.previous.date | date: "%m" }}{% endcapture %}
        {% capture next_month_name %}{{ post.previous.date | date: "%B" }}{% endcapture %}

        {% if forloop.first %}
        <section>
            <h1><a href="/{{ this_year }}/">{{ this_year }}</a></h1>
            <h2><a href="/{{ this_year }}/{{ this_month }}/">{{ this_month_name }}</a></h2>
            <ol class="list" reversed>
        {% endif %}

                {% if post.chapter-title == null %}<li class="list__item" value="{{ post.date | date: "%-d" }}"><a href="{{ post.url }}">{{ post.title | ampersand | replace: "'","&#8217;" }}</a></li>{% endif %}

        {% if forloop.last %}
            </ol>
        </section>
        {% else %}
            {% if this_year != next_year %}
            </ol>
        </section>

        <section>
            <h1><a href="/{{ next_year }}/">{{next_year}}</a></h1>
            <h2><a href="/{{ next_year }}/{{ next_month }}/">{{ next_month_name }}</a></h2>
            <ol class="list" reversed>
            {% else %}
                {% if this_month != next_month %}
            </ol>

            <h2><a href="/{{ this_year }}/{{ next_month }}/">{{ next_month_name }}</a></h2>
            <ol class="list" reversed>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endfor %}
    </div>
</section>