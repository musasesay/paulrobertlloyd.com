---
layout: default
template: archive-year
---
<main class="main" role="main">
    <section class="index index--archive">
        <header class="index__header">
            <h1 class="index__title">{{ page.title | date: "%Y" }}</h1>
        </header>

        {% for post in page.posts %}
            {% capture this_year %}{{ post.date | date: "%Y" }}{% endcapture %}
            {% capture this_month %}{{ post.date | date: "%m" }}{% endcapture %}
            {% capture this_month_name %}{{ post.date | date: "%B" }}{% endcapture %}
            {% capture next_month %}{{ post.previous.date | date: "%m" }}{% endcapture %}
            {% capture next_month_name %}{{ post.previous.date | date: "%B" }}{% endcapture %}

            {% if forloop.first %}
            <h2><a href="/{{ this_year }}/{{ this_month }}/">{{ this_month_name }}</a></h2>
            <ol class="list" reversed>
            {% endif %}

            {% if post.chapter-title == null %}
                <li class="list__item" value="{{ post.date | date: "%-d" }}"><a href="{{ post.url | remove:'.html' }}">{{ post.title }}</a></li>
            {% endif %}

            {% if forloop.last %}
            </ol>
            {% else %}
                {% if this_month != next_month %}
            </ol>

            <h2><a href="/{{ this_year }}/{{ next_month }}/">{{ next_month_name }}</a></h2>
            <ol class="list" reversed>
                {% endif %}
            {% endif %}
        {% endfor %}
    </section>

    {% include forms/search.html %}
    {% include navigation/years.html %}
</main>
