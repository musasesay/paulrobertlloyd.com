//  ============================================================================
//  Mixins
//  ============================================================================

// Clearfix
@mixin clearfix {
    &::before,
    &::after {
        display: table;
        clear: both;
        content: '';
    }
}


// Image replacement
@mixin image-replace {
    text-indent: 200%;
    overflow: hidden;
    white-space: nowrap;
}


// Visually hidden, but still audible
@mixin hidden {
    position: absolute;
    margin: -1px;
    border: 0;
    padding: 0;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
}


// Font families
@mixin ff--serif($font-weight: 400) {
    font-family: serif;
    font-weight: $font-weight;

    .fonts-loaded & {
        font-family: 'Charter ITC Std', serif;
    }
}

@mixin ff--sans-serif($font-weight: 500) {
    font-family: sans-serif;
    font-weight: $font-weight;

    .fonts-loaded & {
        font-family: 'Avenir Next', sans-serif;
    }
}

@mixin ff--monospace($font-weight: 400) {
    font-family: monospace;
    font-weight: $font-weight;

    .fonts-loaded & {
        font-family: 'Source Code Pro', monospace;
    }
}


// Font sizes
@mixin fs--heading-1 {
    font-size: 1.75rem; // 28px
    line-height: (28/28);
    letter-spacing: -1px;

    @include susy-media($b__c) {
        font-size: 3rem; // 48px
        line-height: (44/48);
    }
}

@mixin fs--heading-2 {
    font-size: 1.25rem; // 20px
    line-height: (24/20);

    @include susy-media($b__c) {
        font-size: 1.5rem; // 24px
        line-height: (28/24);
    }
}

@mixin fs--heading-3 {
    font-size: 1.125rem; // 18px
    line-height: (24/18);

    @include susy-media($b__c) {
        font-size: 1.3125rem; // 21px
        line-height: (28/21);
    }
}

@mixin fs--heading-4 {
    font-size: 1rem; // 16px
    line-height: (20/16);

    @include susy-media($b__c) {
        font-size: 1.125rem; // 18px
        line-height: (24/18);
    }
}

@mixin fs--body {
    font-size: 1rem; // 16px
    line-height: (24/16);

    @include susy-media($b__b) {
        font-size: 1.125rem; // 18px
        line-height: (28/18);
    }
}

@mixin fs--caption {
    font-size: 0.875rem; // 14px
    line-height: (20/14);
}


// Layout
@mixin extend {
    margin-right: -(gutter());
    margin-left: -(gutter());

    @include susy-media($b__a) {
        @include clearfix;
        @include span(10 of 8 wider);
        float: none;
        margin-right: -(span(1 wider));
        margin-left: -(span(1 wider));
    }
}


// Caps
@mixin smcp { font-feature-settings: 'smcp' 1; }
@mixin c2sc { font-feature-settings: 'c2sc' 1; }


// Captions and metadata
@mixin caption {
    @include fs--caption;
    @include ff--sans-serif;
}


// Text underline colour
@mixin text-decoration-color($color) {
    @if $color != 'none' {
        background-image: linear-gradient(to bottom, transparent 50%, rgba($color, 0.66) 50%);
        background-repeat: repeat-x;
        background-position: 0% 88%;
        background-size: 0.5em 1px;
        text-decoration: none;
        color: $color;
    } @else {
        background-image: none;
    }
}


// Line rule
@mixin rule($el: 'before', $color: $c__neutral--8, $display: block) {
    @if $el == 'before' or $el == 'after' {
        &:#{$el} {
            display: $display;
            border-top: ($u__baseline / 5) solid $color;
            width: ($u__baseline * 2);
            content: '';
            @if $el == 'before' {
                margin-bottom: ($u__baseline / 2);
            }
            @if $el == 'after' {
                margin-top: ($u__baseline / 5);
            }
        }
    } @else {
        @error "`#{$el}` is not a valid pseudo-element.";
    }
}
