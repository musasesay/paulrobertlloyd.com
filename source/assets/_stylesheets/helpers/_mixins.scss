//  ============================================================================
//  Mixins
//  ============================================================================

// Clearfix
@mixin clearfix {
    &::before,
    &::after {
        display: table;
        clear: both;
        content: '';
    }
}


// Font families
@mixin ff--serif($font-weight: normal) {
    font-family: 'Georgia', serif;
    font-weight: $font-weight;

    .fonts-loaded & {
        font-family: 'Tiempos', 'Georgia', serif;
        // TODO: font-size-adjust: 0.481;
    }
}

@mixin ff--sans-serif($font-weight: normal) {
    font-family: 'Helvetica Neue', sans-serif;
    font-weight: $font-weight;

    .fonts-loaded & {
        font-family: 'Calibre', 'Helvetica Neue', sans-serif;
        // TODO: font-size-adjust: 0.523;
    }
}

@mixin ff--monospace($font-weight: normal) {
    font-family: 'Menlo', monospace;
    font-weight: $font-weight;
}


// Font sizes
@mixin fs--heading-1 {
    line-height: (32/36);
    font-size: 2.25rem; // 36px
    letter-spacing: -0.015em;

    @media (min-width: $b__b) {
        font-size: 3rem; // 48px
    }

    @media (min-width: $b__c) {
        font-size: 3.75rem; // 60px
    }
}

@mixin fs--heading-2 {
    line-height: (28/28);
    font-size: 1.75rem; // 28px
    letter-spacing: -0.02em;

    @media (min-width: $b__b) {
        font-size: 2rem; // 32px
    }

    @media (min-width: $b__c) {
        font-size: 2.25rem; // 36px
    }
}

@mixin fs--heading-3 {
    line-height: (24/20);
    font-size: 1.25rem; // 20px
    letter-spacing: -0.015em;

    @media (min-width: $b__b) {
        line-height: (28/24);
        font-size: 1.5rem; // 24px
    }

    @media (min-width: $b__c) {
        line-height: (32/28);
        font-size: 1.75rem; // 28px
    }
}

@mixin fs--heading-4 {
    line-height: (20/16);
    font-size: 1rem; // 16px
    letter-spacing: -0.01em;

    @media (min-width: $b__b) {
        font-size: 1.5rem; // 24px
    }
}

@mixin fs--lede {
    line-height: (24/20);
    font-size: 1.25rem; // 20px
    letter-spacing: -0.015em;

    @media (min-width: $b__b) {
        line-height: (28/24);
        font-size: 1.5rem; // 24px
    }
}

@mixin fs--billboard {
    line-height: (20/16);
    font-size: 1rem; // 16px

    @media (min-width: $b__b) {
        line-height: (24/18);
        font-size: 1.125rem; // 18px
    }
}

@mixin fs--body {
    line-height: (24/14);
    font-size: 0.875rem; // 14px

    @media (min-width: $b__a) {
        line-height: (28/16);
        font-size: 1rem; // 16px
    }

    @media (min-width: $b__b) {
        line-height: (30/18);
        font-size: 1.125rem; // 18px
    }
}

@mixin fs--caption {
    line-height: (20/15);
    font-size: 0.9375rem; // 15px
}


// Caps
@mixin smcp { font-feature-settings: 'smcp' 1; }
@mixin c2sc { font-feature-settings: 'c2sc' 1; }


// Text highlight
@mixin text-highlight {
    border: solid $c__highlight;
    border-width: 0 4px 2px;
    border-radius: 2px;
    background-color: $c__highlight;
    margin-right: -4px;
    margin-left: -4px;
}


// Text underline colour
@mixin text-decoration-color($background-color, $color) {
    @if $color != 'none' {
        background-image: linear-gradient(to bottom, transparent 89%, $color 89%, $color 93%, transparent 93%);
        text-decoration: none;
        text-shadow: 0.03em 0 $background-color,
                     -0.03em 0 $background-color,
                     0 0.03em $background-color,
                     0 -0.03em $background-color,
                     0.06em 0 $background-color,
                     -0.06em 0 $background-color,
                     0.09em 0 $background-color,
                     -0.09em 0 $background-color,
                     0.12em 0 $background-color,
                     -0.12em 0 $background-color,
                     0.15em 0 $background-color,
                     -0.15em 0 $background-color;

        &:focus {
            background-image: linear-gradient(to bottom, transparent 89%, $c__neutral-1 89%, $c__neutral-1 93%, transparent 93%);
            text-shadow: none;
        }

        &::selection {
            text-shadow: none;
        }
    } @else {
        background-image: none;
    }
}


// Background placeholder
@mixin background-placeholder {
    background-image: repeating-linear-gradient(-58deg, transparent, transparent 3px, rgba($c__neutral-4, 0.2) 4px, rgba($c__neutral-4, 0.2) 6px);
}


// Line rule
@mixin rule($el: 'before', $display: block, $height: ($u__baseline / 4)) {
    @if $el == 'before' or $el == 'after' {
        &:#{$el} {
            display: $display;
            border-top: $height solid rgba($c__neutral-1, 0.2);
            width: ($u__baseline * 2);
            content: '';
            @if $el == 'before' {
                margin-bottom: ($u__baseline / 4);
            }
            @if $el == 'after' {
                margin-top: ($u__baseline / 4);
            }
        }
    } @else {
        @error "`#{$el}` is not a valid pseudo-element.";
    }
}


// Visually hide content
@mixin visually-hidden {
    position: absolute;
    margin: -1px;
    border: 0;
    padding: 0;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
}
